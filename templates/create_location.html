<!-- location_form.html -->

<div id="map" style="height: 400px;"></div>

<!-- Add the Google Maps API script to your template -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initMap" async defer></script>

<script>
  function initMap() {
    // Create a new map centered on a default location
    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 37.7749, lng: -122.4194},
      zoom: 12
    });

    // Add a click event listener to the map
    map.addListener('click', function(event) {
      // Get the latitude and longitude of the clicked location
      var latitude = event.latLng.lat();
      var longitude = event.latLng.lng();

      // Set the latitude and longitude values in the form fields
      document.getElementById('latitude').value = latitude;
      document.getElementById('longitude').value = longitude;
    });
  }
</script>

<form method="post">
  {% csrf_token %}
  {{ form.as_p }}
  <label for="latitude">Latitude:</label>
  <input type="text" id="latitude" name="latitude">
  <label for="longitude">Longitude:</label>
  <input type="text" id="longitude" name="longitude">
  <button type="submit">Submit</button>
</form>
